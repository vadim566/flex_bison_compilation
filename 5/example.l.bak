%{
	#include <ctype.h>
	int line = 1;
	int countCL = 0;
	#include <assert.h>
	
%}


%%
[A-Z][a-z]+		{countCL++; fprintf(yyout,"%s", yytext);}
[\n][A-Z][a-z]+		{countCL++; fprintf(yyout,"%s", yytext);}

[a-z]+			{fprintf(yyout,"%c%s", toupper(yytext[0]), yytext+1);}
[\n][a-z]+		{fprintf(yyout,"%c%s", toupper(yytext[0]), yytext+1);}
[0-9]			{fprintf(yyout,"");}
\.			{fprintf(yyout,"!");}
.			ECHO;
%%


int yywrap(){return 1;}
void main(int argc, char* argv[])
{

	yyin = fopen(argv[1], "r");
	assert(yyin);
	if(argv[2])
		yyout=fopen(argv[2],"w");
	else
		yyout=stdout;
	yylex();
		fprintf(yyout,yyout,"\n\nUpper count=%d", countCL);

	fclose(yyin);
	if(argv[2])	
		fclose(yyout);
}
